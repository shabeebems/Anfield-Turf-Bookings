<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from htmldemo.net/furbar-1/furbar/checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Dec 2023 16:16:17 GMT -->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Anfield turf booking</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="assets/images/liverpool_logo_PNG5.png" />

    <!-- CSS
	============================================ -->

    <!-- Icon Font CSS -->
    <link rel="stylesheet" href="assets/css/plugins/pe-icon-7-stroke.css" />
    <link rel="stylesheet" href="assets/css/plugins/font-awesome.min.css" />

    <!-- Plugins CSS -->
    <link rel="stylesheet" href="assets/css/plugins/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/plugins/animate.min.css" />
    <link rel="stylesheet" href="assets/css/plugins/swiper-bundle.min.css" />
    <link rel="stylesheet" href="assets/css/plugins/odometer.min.css" />
    <link rel="stylesheet" href="assets/css/plugins/select2.min.css" />
    <link rel="stylesheet" href="assets/css/plugins/ion.rangeSlider.min.css" />

    <!-- Main Style CSS -->
    <!-- <link rel="stylesheet" href="assets/css/style.css"> -->
    <link rel="stylesheet" href="assets/css/style.min.css" />
   
    <!-- time form style -->
    <style>
        .schedule {
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid #ccc;
            padding: 10px 20px;
            width: 600px;
            
            
        }

        .time,
        .event {
            font-weight: normal;
            font-size: 14px;
            color: black;
            
        }

        .heading {
            font-weight: bold;
            font-size: 16px;
            color:chocolate;
        }
    </style>
<!-- time form style -->


    <!-- Date form style -->
    <style>
        .slot {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 0;
          display: flex;
          justify-content: center;
        }
    
        .dateDiv {
          background-color: #fff;
          border-radius: 8px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          padding: 20px;
          width: 300px;
        }
    
        .slotForm {
          display: flex;
          flex-direction: column;
          align-items: center;
        }
    
        .slotLabel {
          font-size: 16px;
          margin-bottom: 10px;
        }
    
        #start_date {
          width: 100%;
          padding: 10px;
          margin-bottom: 20px;
          border: 1px solid #ccc;
          border-radius: 5px;
        }
    
        .slotButton {
          padding: 10px 20px;
          background-color: #f2a100;
          color: #ffffff;
          border: none;
          border-radius: 5px;
          cursor: pointer;
        }
    
        .slotButton:hover {
          background-color: #494949;
        }
      </style>
</head>


<body>
   <!-- Header Start  -->
   <div class="header-area header-sticky d-none d-lg-block">
    <div class="container position-relative">
        <div class="row align-items-center">
            <div class="col-lg-3">
                <!-- Header Logo Start -->
                <div class="header-logo">
                    <a href="/home"><img src="assets/images/liverpool_logo_PNG5.png" width="154" height="46" alt="Logo" /></a>
                </div>
                <!-- Header Logo End -->
            </div>
            <div class="col-lg-6">
                <div class="header-menu">
                    <ul class="nav-menu">
                        <li><a href="/home">Home</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3">
                <!-- Header Meta Start -->
                <div class="header-meta">
                    <div class="dropdown">
                        <a class="action" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="pe-7s-search"></i>
                        </a>

                        <div class="dropdown-menu dropdown-search">
                            <!-- Header Search Start -->
                            <div class="header-search">
                                <form action="/search-location" autocomplete="off" id="location-form">
                                    <input type="text" placeholder="Search location...." list="locations" name="city">
                                    <datalist id="locations">
                                        <% for(let i = 0; i < uniqueCity.length; i++){ %>
                                        <option value="<%= uniqueCity[i] %>">
                                        <% } %>
                                    </datalist>
                                    <button type="submit">
                                        <i class="pe-7s-search"></i>
                                    </button>
                                </form>
                            </div>
                            <!-- Header Search End -->
                        </div>
                    </div>

                    <div class="dropdown">
                        <a class="action" href="#" role="button" data-bs-toggle="dropdown"><i class="pe-7s-user"></i></a>

                        <ul class="dropdown-menu dropdown-profile">
                            <li><a href="/my-accounts">My Account</a></li>
                            <li><a href="/logout">Logout</a></li>
                        </ul>
                    </div>
                </div>
                <!-- Header Meta End -->
            </div>
        </div>
    </div>
</div>
    <!-- Header End -->


    <!-- Page Banner Section Start -->
    <div class="section page-banner-section" style="background-image: url(assets/images/team-photos/Soccer.jpg)">
        <div class="container">
            <!-- Page Banner Content End -->
            <div class="page-banner-content">
                <h2 class="title">Slot Booking</h2>
                <ul class="breadcrumb">
                    <li><a href="/">Home</a></li>
                    <li class="active">Slot Booking</li>
                </ul>
            </div>
            <!-- Page Banner Content End -->
        </div>
    </div>
    <!-- Page Banner Section End -->

    <!-- Date Selection start -->
    <div class="section section-padding">
        <div class="container">
            <div class="slot">
                <div class="dateDiv">
                    <!-- <h1>Select Start Date</h1> -->
                    <form method="post" action="/slot-selection?_id=<%= turf._id %>" class="slotForm">
                        <label class="slotLabel" for="start_date">Booking Date:</label>
                        <select id="start_date" name="date" required>
                            <option value="<%= currentDate %>"><%= currentDate %></option>
                            <% dates.forEach(date => { 
                                if(date!=currentDate){ %>
                                    <option value="<%= date %>"><%= date %></option>
                                <% }
                            }) %>
                        </select>
                        <button class="slotButton" type="submit">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Date Selection end -->


    <div class="section section-padding">
    <div style="max-width: 800px; margin: 0 auto; text-align: center; background-color: #f8f9fa; 
                padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
        <% if (availableTimes.length !== 0) { %>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; 
                    font-weight: bold; font-size: 16px; color: #343a40; margin-bottom: 20px; 
                    text-align: center;">
            <div>Time</div>
            <div>Cash</div>
            <% if (percentage !== 0) { %>
            <div>Offer Price</div>
            <% } %>
            <div>Status</div>
        </div>

        <% for (let i = 0; i < availableTimes.length; i++) { %>
        <% if (startingTimes.includes(availableTimes[i].startingTime)) { %>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; 
                    padding: 10px 0; border-bottom: 1px solid #dee2e6; align-items: center; text-align: center;">
            <div><%= availableTimes[i].startingTime %> to <%= availableTimes[i].endingTime %></div>
            <% if (percentage !== 0) { 
                let p = (availableTimes[i].cash * percentage) / 100 %>
            <div style="text-decoration: line-through; color: #6c757d;"><%= availableTimes[i].cash %></div>
            <div style="color: #28a745; font-weight: bold;">INR <%= availableTimes[i].cash - p %></div>
            <% } else { %>
            <div>INR <%= availableTimes[i].cash %></div>
            <% }
            if (checkTime.length > 0) {
                if (checkTime.includes(availableTimes[i].startingTime)) { %>
            <div style="color: white; background-color: brown; padding: 5px 10px; border-radius: 5px;">Booked</div>
            <% } else { %>
            <div>
                <button style="background-color: #f2a100; border: none; padding: 5px 10px; 
                               border-radius: 5px; color: white; cursor: pointer;" 
                        onclick="slotClick('<%= JSON.stringify(availableTimes[i]) %>')">Book Now</button>
            </div>
            <% } } else { %>
            <div>
                <button style="background-color: #f2a100; border: none; padding: 5px 10px; 
                               border-radius: 5px; color: white; cursor: pointer;" 
                        onclick="slotClick('<%= JSON.stringify(availableTimes[i]) %>')">Book Now</button>
            </div>
            <% } %>
        </div>
        <% } %>
        <% } %>
        <% } else { %>
        <h2 style="color: #dc3545; margin-top: 20px;">No Slots Available</h2>
        <% } %>
    </div>
</div>





    <!--Back To Start-->
    <button id="backBtn" class="back-to-top"><i class="pe-7s-angle-up"></i></button>
    <!--Back To End-->
    <!-- JS
    ============================================ -->

    <!-- Modernizer & jQuery JS -->
    <script>
        async function slotClick(time) {
            try {
                // time.a = 10
                fetch(`/check-bookings?id=<%= turf._id %>&date=<%= currentDate %>&time=${time}&percentage=<%= percentage %>`)
                .then(res=>res.json())
                .then(data=>{
                    if (data.success) {
                        console.log(data.turf)
                        console.log(data.date)
                        console.log(data.time)
                        const turfData = JSON.stringify(data.turf);
                        const timeData = JSON.stringify(data.time);
                        window.location.href = `/confirm-booking?turf=${encodeURIComponent(turfData)}&date=${data.date}&percentage=${data.percentage}&time=${encodeURIComponent(timeData)}`
                    } else if (data.reject) {
                        Swal.fire({
                            title: "Already booked",
                            text: "This slot is already booked, You can book another slot",
                        });
                    }
                })
            } catch (error) {
                console.log(error.message)
            }
        }    
    </script>    

    <script src="assets/js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>

    <script src="sweetalert2.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Bootstrap JS -->
    <script src="assets/js/plugins/popper.min.js"></script>
    <script src="assets/js/plugins/bootstrap.min.js"></script>

    <!-- Plugins JS -->
    <script src="assets/js/plugins/swiper-bundle.min.js"></script>
    <script src="assets/js/plugins/ajax-contact.js"></script>
    <script src="assets/js/plugins/odometer.min.js"></script>
    <script src="assets/js/plugins/select2.min.js"></script>
    <script src="assets/js/plugins/ion.rangeSlider.min.js"></script>
    <script src="assets/js/plugins/jquery.zoom.min.js"></script>

    <!-- Main JS -->
    <script src="assets/js/main.js"></script>

</body>


<!-- Mirrored from htmldemo.net/furbar-1/furbar/checkout.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 14 Dec 2023 16:16:17 GMT -->
</html>